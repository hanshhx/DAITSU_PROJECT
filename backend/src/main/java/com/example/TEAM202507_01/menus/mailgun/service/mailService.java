package com.example.TEAM202507_01.menus.mailgun.service;
// [1] 패키지 선언: 이 파일이 '메일건 메뉴 > 서비스' 폴더에 있다는 주소입니다.

// [2] 임포트: 메일 발송에 필요한 데이터 가방(DTO)과 예외 처리 도구를 가져옵니다.
import com.example.TEAM202507_01.menus.mailgun.dto.mailDto; // 메일의 수신자, 제목, 내용을 담은 가방
import com.example.TEAM202507_01.user.dto.ResetPasswordDto; // (현재 메서드에는 안 쓰이지만 확장을 위해 임포트됨)
import jakarta.mail.MessagingException; // 메일 발송 실패 시 발생하는 에러를 다루기 위한 도구

// [3] 인터페이스 선언: "나는 mailService라는 이름의 설계도(메뉴판)야."
// class가 아니라 'interface'이므로, 메서드의 이름만 있고 실제 작동하는 코드({ })는 없습니다.
public interface mailService {

    // =========================================================
    // 1. 일반 메일 발송 기능 (공통)
    // =========================================================
    // [의미]: 가장 기본적인 메일 발송 기능입니다.
    // [사용처]: 시스템 공지나 개별 연락 등 수동으로 메일을 보낼 때 사용합니다.
    // [파라미터]: mailDto (받는 사람, 제목, 본문이 담긴 객체)
    void sendMail(mailDto mailDto);

    // =========================================================
    // 2. 아이디 찾기 인증 메일 발송 기능
    // =========================================================
    // [의미]: 사용자가 아이디를 잊어버렸을 때, 본인 확인용 인증번호를 보냅니다.
    // [파라미터]:
    //   - addr: 메일을 받을 사용자의 이메일 주소
    //   - token: 시스템이 생성한 보안 인증 번호(또는 코드)
    void sendFindIdMail(String addr, String token);

    // =========================================================
    // 3. 비밀번호 재설정 메일 발송 기능
    // =========================================================
    // [의미]: 비밀번호를 바꿀 수 있는 특수한 링크나 코드를 보냅니다.
    // [파라미터]:
    //   - addr: 재설정 링크를 받을 이메일 주소
    //   - token: 링크 뒤에 붙을 고유한 보안 토큰값
    void sendResetPwMail(String addr, String token);

    // =========================================================
    // 4. 이메일 중복 확인/가입 인증 메일 발송 기능
    // =========================================================
    // [의미]: 회원가입 시 이 이메일이 진짜 본인 소유인지 확인하는 메일을 보냅니다.
    // [파라미터]:
    //   - email: 가입하려는 이메일 주소
    //   - token: 클릭 시 인증이 완료되는 보안 코드
    void sendCheckEmail(String email, String token);
}

// =========================================================================
// ///왜 인터페이스를 썼는가? (철학적 배경)///
// =========================================================================
// 1. 유연성: 나중에 메일 보내는 방식이 바뀌더라도(mailServiceImpl 코드를 갈아엎더라도),
//    이를 호출하는 Controller 코드는 수정할 필요가 없게 하기 위함이다.
//    (예: Mailgun 서비스를 쓰다가 네이버 메일 API로 바꿔도 컨트롤러는 똑같이 .sendMail()만 부르면 됨)

// 2. 다형성: 하나의 메뉴판(Interface) 아래에 여러 명의 요리사(Implementation)를 둘 수 있는
//    객체지향의 핵심 원리를 활용한 것이다.

// 3. 유지보수: 기능의 '정의'와 '실제 구현'을 분리함으로써 코드가 깔끔해지고 관리가 쉬워진다.

//
//        약속 정의 (Interface):
//
//        개발팀이 모여 약속합니다. "로그인이나 비밀번호 찾기 기능을 만들 때, 메일 발송은 무조건 이 인터페이스에 정의된 메서드 이름을 사용하자!"
//
//        협업의 효율성:
//
//        기능 구현자: 인터페이스를 보고 메일을 발송하는 복잡한 서버 로직을 짭니다.
//
//        기능 사용자(Controller): 메일 발송이 실제로 어떻게 성공하는지 몰라도 됩니다. 그냥 sendCheckEmail이라는 메서드 이름만 알면 인증 메일을 보낼 수 있습니다.
//
//        부품 교체의 편리함:
//
//        만약 메일 발송 업체(Mailgun)가 망해서 다른 업체(AWS SES 등)로 바꿔야 한다면? 인터페이스는 그대로 두고, 뒤에 연결된 '진짜 일꾼(구현체)'만 갈아 끼우면 됩니다. 컨트롤러 코드는 단 한 줄도 고칠 필요가 없죠.